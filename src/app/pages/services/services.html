<main class="main">

  <!-- Page Title -->
  <div class="page-title dark-background" data-aos="fade" style="background-image: url(assets/img/page-title-bg.webp);">
    <div class="container position-relative">
      <h1>Our Services</h1>
      <nav class="breadcrumbs">
        <ol>
          <li><a routerLink="/">Home</a></li>
          <li class="current">Services</li>
        </ol>
      </nav>
    </div>
  </div><!-- End Page Title -->

  <!-- Services Section -->
  <section id="services-page" class="services-page section">

    <div class="container">

      <!-- Main Tabs Navigation -->
      <div class="services-tabs-nav">
        <button
          class="tab-button"
          [class.active]="activeTab === 'packages'"
          (click)="switchTab('packages')">
          <i class="bi bi-box-seam"></i>
          Ayurveda Packages
        </button>
        <button
          class="tab-button"
          [class.active]="activeTab === 'therapies'"
          (click)="switchTab('therapies')">
          <i class="bi bi-heart-pulse"></i>
          Therapies
        </button>
        <button
          class="tab-button"
          [class.active]="activeTab === 'specialized'"
          (click)="switchTab('specialized')">
          <i class="bi bi-hospital"></i>
          Specialized Treatments
        </button>
      </div>

      <!-- Packages Tab Content -->
      @if (activeTab === 'packages') {
        <div class="tab-content packages-content">

          <!-- Packages Sub-tabs -->
          <div class="packages-tabs-nav">
            <button
              class="sub-tab-button"
              [class.active]="activePackageTab === 'wellness'"
              (click)="switchPackageTab('wellness')">
              <i class="bi bi-heart"></i>
              Wellness Packages
            </button>
            <button
              class="sub-tab-button"
              [class.active]="activePackageTab === 'treatment'"
              (click)="switchPackageTab('treatment')">
              <i class="bi bi-bandaid"></i>
              Treatment Packages
            </button>
          </div>

          <!-- Wellness Packages -->
          @if (activePackageTab === 'wellness') {
            <div class="wellness-packages">
              <div class="section-intro">
                <p>Traditional Kerala Ayurvedic wellness programs designed to promote holistic health, prevent diseases, and enhance overall well-being through time-tested therapies and personalized care.</p>
              </div>

              <div class="packages-grid">
                @for (pkg of wellnessPackages; track pkg.id) {
                  <div class="package-card">
                    <div class="package-header" (click)="togglePackage(pkg.id)">
                      <div class="package-icon">
                        <i class="bi {{ pkg.icon }}"></i>
                      </div>
                      <div class="package-title-wrap">
                        <h3 class="package-name">{{ pkg.name }}</h3>
                        <p class="package-subtitle">{{ pkg.subtitle }}</p>
                      </div>
                      <div class="expand-icon">
                        <i class="bi" [class.bi-chevron-down]="expandedPackage !== pkg.id" [class.bi-chevron-up]="expandedPackage === pkg.id"></i>
                      </div>
                    </div>
                    @if (expandedPackage === pkg.id) {
                      <div class="package-body">
                        <p class="package-description">{{ pkg.description }}</p>
                        <div class="package-footer">
                          <div class="package-duration">
                            <i class="bi bi-calendar-check"></i>
                            <span>{{ pkg.duration }}</span>
                          </div>
                          <a class="book-now-link" (click)="openBookingModal(pkg.id, 'wellness')">
                            Book Now
                          </a>
                        </div>
                      </div>
                    }
                  </div>
                }
              </div>
            </div>
          }

          <!-- Treatment Packages -->
          @if (activePackageTab === 'treatment') {
            <div class="treatment-packages">
              <div class="treatment-intro">
                <h3>Traditional Kerala Ayurvedic Treatments</h3>
                <p>We Nedumpullil Ayurveda and Marma Chikitsa Kendram provide traditional Kerala Ayurvedic treatments by preserving the tradition of Ayurveda with a modern scientific outlook.</p>
                <p class="note"><strong>N.B:</strong> These treatment packages will be designed based on the case report form or doctor consultation and the condition of the patient. Available in 7, 13, 21, 28 and 41 day packages.</p>
              </div>

              <div class="treatment-areas-section">
                <h4>Areas We Treat</h4>
                <div class="treatment-timeline">
                  @for (area of treatmentAreas; track area.id; let i = $index) {
                    <div class="timeline-item" [class.timeline-left]="i % 2 === 0" [class.timeline-right]="i % 2 !== 0">
                      <div class="timeline-content">
                        <div class="timeline-card">
                          <div class="area-icon">
                            <i class="bi {{ area.icon }}"></i>
                          </div>
                          <p class="area-name">{{ area.name }}</p>
                          <a class="area-book-link" (click)="openBookingModal(area.id, 'treatment')">
                            Book Now
                          </a>
                        </div>
                      </div>
                      <div class="timeline-dot"></div>
                    </div>
                  }
                </div>
              </div>
            </div>
          }

        </div>
      }

      <!-- Therapies Tab Content -->
      @if (activeTab === 'therapies') {
        <div class="tab-content therapies-content">
          <div class="section-intro">
            <h3>Traditional Ayurvedic Therapies</h3>
            <p>Experience time-honored Ayurvedic therapies tailored to restore balance, relieve pain, and rejuvenate your body and mind.</p>
          </div>

          <div class="therapies-grid">
            @for (therapy of therapies; track therapy.id) {
              <div class="therapy-card"
                   [id]="'therapies-' + therapy.id"
                   [class.highlighted]="highlightedItem?.category === 'therapies' && highlightedItem?.id === therapy.id">
                <div class="therapy-image">
                  <img [src]="therapy.image" [alt]="therapy.name">
                </div>
                <div class="therapy-content">
                  <h4>{{ therapy.name }}</h4>
                  <p class="therapy-subtitle">{{ therapy.subtitle }}</p>
                  <p class="therapy-description">{{ therapy.description }}</p>
                  <div class="therapy-footer">
                    <a class="book-now-link"
                       [class.glow]="highlightedItem?.category === 'therapies' && highlightedItem?.id === therapy.id"
                       (click)="openBookingModal(therapy.id, 'therapy')">
                      Book Now
                    </a>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      }

      <!-- Specialized Treatments Tab Content -->
      @if (activeTab === 'specialized') {
        <div class="tab-content specialized-content">
          <div class="section-intro">
            <h3>Specialized Treatment Clinics</h3>
            <p>Our specialized clinics offer comprehensive care for specific health conditions, combining traditional Ayurvedic wisdom with modern therapeutic approaches.</p>
          </div>

          <div class="specialties-accordion">
            @for (specialty of specializedTreatments; track specialty.id) {
              <div class="specialty-card"
                   [id]="'specialized-' + specialty.id"
                   [class.highlighted]="highlightedItem?.category === 'specialized' && highlightedItem?.id === specialty.id">
                <div class="specialty-header" (click)="toggleSpecialty(specialty.id)">
                  <div class="specialty-icon">
                    <i class="bi {{ specialty.icon }}"></i>
                  </div>
                  <div class="specialty-title-wrap">
                    <h3 class="specialty-name">{{ specialty.name }}</h3>
                    <p class="specialty-subtitle">{{ specialty.subtitle }}</p>
                  </div>
                  <div class="expand-icon">
                    <i class="bi" [class.bi-chevron-down]="expandedSpecialty !== specialty.id" [class.bi-chevron-up]="expandedSpecialty === specialty.id"></i>
                  </div>
                </div>
                @if (expandedSpecialty === specialty.id) {
                  <div class="specialty-body">
                    <p class="specialty-description">{{ specialty.description }}</p>

                    <div class="specialty-details">
                      <div class="conditions-section">
                        <h5><i class="bi bi-check2-circle"></i> Conditions We Treat</h5>
                        <ul>
                          @for (condition of specialty.conditions; track condition) {
                            <li>{{ condition }}</li>
                          }
                        </ul>
                      </div>

                      <div class="treatments-section">
                        <h5><i class="bi bi-stars"></i> Treatment Modalities</h5>
                        <div class="treatment-tags">
                          @for (treatment of specialty.treatments; track treatment) {
                            <span class="treatment-tag">{{ treatment }}</span>
                          }
                        </div>
                      </div>
                    </div>

                    <div class="specialty-footer">
                      <a class="book-now-link"
                         [class.glow]="highlightedItem?.category === 'specialized' && highlightedItem?.id === specialty.id"
                         (click)="openBookingModal(specialty.id, 'specialized')">
                        Book Consultation
                      </a>
                    </div>
                  </div>
                }
              </div>
            }
          </div>
        </div>
      }

    </div>

  </section><!-- /Services Section -->

</main>

@if (showConsultationModal) {
  <app-consultation-modal
    (close)="closeConsultationModal()"
    [preSelectedWellness]="preSelectedWellness"
    [preSelectedTreatment]="preSelectedTreatment"
    [preSelectedTherapy]="preSelectedTherapy"
    [preSelectedSpecialized]="preSelectedSpecialized">
  </app-consultation-modal>
}
